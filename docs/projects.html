<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>rick-gilmore.com - Projects</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">rick-gilmore.com</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./projects.html" aria-current="page"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./publications.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./teaching.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./interests.html"> 
<span class="menu-text">Interests</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.linkedin.com/in/rick-o-gilmore/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text">LinkedIn</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/rogilmore"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text">Github</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Projects</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>This page briefly describes some of my active scholarly projects.</p>
<!-- # Active -->
<section id="play-project" class="level2">
<h2 class="anchored" data-anchor-id="play-project">PLAY Project</h2>
<p><img src="https://www.play-project.org/img/PLAY-logo.png" class="img-fluid" style="width:75.0%"></p>
<p>The Play &amp; Learning Across a Year (<a href="https://play-project.org">PLAY</a>) Project is a large-scale research effort funded by the U.S. National Institutes of Health (NIH) to collect a database of video recordings of 1,000 mothers and their infants engaged in natural activity at home. More than 30 sites across the U.S. are collecting data, and more than 70 researchers across North America are participating. All data collected by PLAY will be shared with the research community via <a href="https://databrary.org">Databrary</a>.</p>
<p>If you are a parent of a 12-, 18-, or 24-month-old infant and want to participate, visit <a href="https://anhourinthelife.org" class="uri">https://anhourinthelife.org</a>.</p>
<p>This site provides regular project status updates about data being collected from parents via interviews and surveys as part of PLAY: <a href="https://PLAY-behaviorome.github.io/KoBoToolbox" class="uri">https://PLAY-behaviorome.github.io/KoBoToolbox</a>. For example, here is a figure that shows how two different ways of calculating when infants begin to walk compare with one another:</p>
</section>
<section id="source-httpsplay-behaviorome.github.iokobotoolbox" class="level2">
<h2 class="anchored" data-anchor-id="source-httpsplay-behaviorome.github.iokobotoolbox"><img src="https://play-behaviorome.github.io/KoBoToolbox/include/img/fig-walk-mos-kea-who-1.png" class="img-fluid quarto-figure quarto-figure-center" alt="Source: https://play-behaviorome.github.io/KoBoToolbox"></h2>
</section>
<section id="databrary" class="level2">
<h2 class="anchored" data-anchor-id="databrary">Databrary</h2>
<p><img src="https://raw.githubusercontent.com/databrary/databrary/master/web/images/logo/databrary-nav.svg" class="img-fluid" style="width:75.0%"></p>
<p><a href="https://databrary.org">Databrary</a> is the world’s only data library specialized for the storage and sharing of video and audio recordings and other sensitive or identifiable data. Databrary implements a two-pronged approach to open sharing of identifiable data:</p>
<ol type="1">
<li>Access to most data is restricted to a community of researchers who have received explicit authorization from their institutions.</li>
<li>Authorized researchers promise only to share data where participants have given their permission.</li>
</ol>
<p>Karen Adolph (NYU) and I co-founded and co-direct Databrary.</p>
<section id="analytics" class="level3">
<h3 class="anchored" data-anchor-id="analytics">Analytics</h3>
<p>I maintain a site that reports on Databrary’s assets and is updated regularly: <a href="https://databrary.github.io/analytics" class="uri">https://databrary.github.io/analytics</a>. Here, for example, is a figure showing Databrary’s growth since its inception in 2014.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://databrary.github.io/analytics/include/img/fig-databrary-inst-invest-timeseries-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
<figcaption>Source: <a href="https://databrary.github.io/analytics" class="uri">https://databrary.github.io/analytics</a></figcaption>
</figure>
</div>
</section>
<section id="databraryr-package" class="level3">
<h3 class="anchored" data-anchor-id="databraryr-package">databraryr package</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/databrary/databraryr/master/man/figures/logo.png" class="img-fluid figure-img"></p>
<figcaption><code>databraryr</code> logo</figcaption>
</figure>
</div>
<p>This analytics site makes use of an R package I developed with Jeff Spies. The package is called <code>databraryr</code>, and as of 2023-09-01, is available on GitHub at <a href="https://github.com/databrary/databraryr" class="uri">https://github.com/databrary/databraryr</a>. We are preparing the package for submission to the CRAN archive.</p>
<p>In collaboration with Andrea Seisler, my lab is leading the development of a new and updated <a href="https://databrary.github.io/guide">guide</a> to the Databrary system.</p>
<hr>
</section>
</section>
<section id="penn-state-open-science-initiative" class="level2">
<h2 class="anchored" data-anchor-id="penn-state-open-science-initiative">Penn State Open Science Initiative</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://penn-state-open-science.github.io/bootcamp-2023/include/img/make-word-cloud-1.png" class="img-fluid figure-img"></p>
<figcaption>Source: <a href="https://penn-state-open-science.github.io/bootcamp-2023" class="uri">https://penn-state-open-science.github.io/bootcamp-2023</a></figcaption>
</figure>
</div>
<p>With Frank Hillary (Psychology), Nicole Lazar (Statistics), Briana Wham (University Libraries), Alaina Pearce (Nutritional Sciences), and several other colleagues, I am working on a series of open science initiatives at Penn State.</p>
<p>Our group deployed a <a href="https://penn-state-open-science.github.io/survey-fall-2022/">survey</a> of faculty and students about their knowledge of and interest in open science. Here is a figure from that survey showing the distribution of responses by unit:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://penn-state-open-science.github.io/survey-fall-2022/include/img/fig-dept-unit-1.png" class="img-fluid figure-img"></p>
<figcaption>Source: <a href="https://penn-state-open-science.github.io/survey-fall-2022" class="uri">https://penn-state-open-science.github.io/survey-fall-2022</a></figcaption>
</figure>
</div>
<p>And this figure shows what positions at Penn State were held by respondents:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://penn-state-open-science.github.io/survey-fall-2022/include/img/fig-position-1.png" class="img-fluid figure-img"></p>
<figcaption>Source: <a href="https://penn-state-open-science.github.io/survey-fall-2022" class="uri">https://penn-state-open-science.github.io/survey-fall-2022</a></figcaption>
</figure>
</div>
<p>That project also attempted to test how an openly developed <a href="https://penn-state-open-science.github.io/survey-fall-2022/hrp-591.html">IRB protocol</a> might work.</p>
<p>In early August 2023, we hosted an <a href="https://penn-state-open-science.github.io/bootcamp-2023/">Open Science Bootcamp</a>, with more than 50 participants from a broad range of backgrounds.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://penn-state-open-science.github.io/bootcamp-2023/include/img/by-position-1.png" class="img-fluid figure-img"></p>
<figcaption>Source: <a href="https://penn-state-open-science.github.io/bootcamp-2023" class="uri">https://penn-state-open-science.github.io/bootcamp-2023</a></figcaption>
</figure>
</div>
</section>
<section id="proximal-emotional-environment-project-peep" class="level2">
<h2 class="anchored" data-anchor-id="proximal-emotional-environment-project-peep">Proximal Emotional Environment Project (PEEP)</h2>
<p>With Pamela Cole, Koraly Perez-Edgar, Suzy Scherf, Michelle Vigeant, Pan Liu and others I have enjoyed studying how affective prosody is perceived by young children and how different prosodies evoke distinctive responses in the brain.</p>
<p>We put a great deal of effort into generating well-controlled acoustic materials. Much of that work is shared on Databrary here:</p>
<p>Cole, P.M., Gilmore, R.O., Scherf, K.S., Perez-Edgar, K. &amp; Vigeant, M.C. (2016). The Proximal Emotional Environment Project (PEEP). Databrary. Retrieved September 1, 2023 from http://doi.org/10.17910/B7.248</p>
<p>Cole, P.M., Gilmore, R.O., Scherf, K.S., Perez-Edgar, K. &amp; Vigeant, M.C. (2017). Young children’s neural processing of their mother’s voice: An fMRI study. Databrary. Retrieved September 1, 2023 from http://doi.org/10.17910/b7.339.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>These materials may not be fully available to the public, but they are openly shared with authorized users of Databrary.</p>
</div>
</div>
</section>
<section id="sex-differences-in-vision-and-cognition" class="level2">
<h2 class="anchored" data-anchor-id="sex-differences-in-vision-and-cognition">Sex differences in vision and cognition</h2>
<p>Together with Yiming Qian and Sheri Berenbaum, we studied the relationship between two measures of visual perception–contrast sensitivity and motion duration sensitivity–and mental rotation.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/gilmore-lab/sex-differences-project/master/analysis/paper_figs/fig-01-boxplots-new.jpg" class="img-fluid figure-img"></p>
<figcaption>Source: Qian, Berenbaum, &amp; Gilmore, 2022</figcaption>
</figure>
</div>
<p>Details about our entire data processing workflow can be found here: <a href="https://github.com/gilmore-lab/sex-differences-project" class="uri">https://github.com/gilmore-lab/sex-differences-project</a>.</p>
<p>This paper describes our results in more detail:</p>
<p>Qian, Y., Berenbaum, S. A. &amp; Gilmore, R. O. (2022). Vision contributes to sex differences in spatial cognition and activity interests. <em>Scientific Reports</em>, <em>12</em>(1), 17623. https://doi.org/10.1038/s41598-022-22269-y</p>
</section>
<section id="symmetry-perception" class="level2">
<h2 class="anchored" data-anchor-id="symmetry-perception">Symmetry perception</h2>
<p>Peter Kohler, Shivam Vedak, and I published a paper recently from a long-expired NSF funded project on the perception and neural processing of visual symmetry.</p>
<p>Kohler, P. J., Vedak, S. &amp; Gilmore, R. O. (2022). Perceptual Similarities among Wallpaper Group Exemplars. <em>Symmetry</em>, <em>14</em>(5), 857. https://doi.org/10.3390/sym14050857</p>
<p>Some of the images we used in this study are shared on Databrary:</p>
<p>Gilmore, R.O. &amp; Norcia, A.M. (2014). The Salience of Lower-Order, Localized Features in Highly Self-Similar Wallpaper Groups. Databrary. Retrieved September 1, 2023 from http://doi.org/10.17910/B7KS3M.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://nyu.databrary.org/slot/9846/-/asset/11970/download?inline=true.png" class="img-fluid figure-img"></p>
<figcaption>Source: <a href="http://doi.org/10.17910/B7KS3M" class="uri">http://doi.org/10.17910/B7KS3M</a></figcaption>
</figure>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>