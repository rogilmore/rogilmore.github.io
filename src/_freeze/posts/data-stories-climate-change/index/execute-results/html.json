{
  "hash": "75446693a41c3c716839aa76035ed6d9",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Data stories: Climate change\"\ndate: 2024-11-01\ncategories:\n    - climate change\n    - data science\n---\n\n\n\nIt's impossible to ignore the big decisions that Americans will be making next Tuesday.\nBut neither campaign is talking about climate change in a serious way.\nI have my own thoughts about why, but let's look at some data rather than pontificate.\n\nI found that there is an Emissions Database for Global Atmospheric Research (EDGAR) site that collects data on these questions. \nHere is the site for emissions data from 1970 to 2024 for a large set of countries:\n\n<https://data.jrc.ec.europa.eu/dataset/74f34d14-5819-4954-8b61-b11ce3d4ca48>\n\nThe following code downloads the data.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nurl <- \"https://jeodpp.jrc.ec.europa.eu/ftp/jrc-opendata/EDGAR/datasets/EDGAR_2024_report/EDGAR_2024_GHG_booklet_2024_fossilCO2only.xlsx\"\n\ndownload.file(url, destfile = \"data/edgar-co2-2024.xlsx\", mode = \"wb\")\n```\n:::\n\n\n\nThis is an Excel spreadsheet, so the [readxl](https://readxl.tidyverse.org) package will be helpful.\n\nSome poking around in the Excel spreadsheet indicates two tabs that are especially relevant `fossil_CO2_per_GDP_by_country` and `fossil_CO2_per_capita_by_country`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsheets_avail <- readxl::excel_sheets(\"data/edgar-co2-2024.xlsx\")\nsheets_avail\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"info\"                            \"citations and references\"       \n[3] \"fossil_CO2_totals_by_country\"    \"fossil_CO2_by_sector_country_su\"\n[5] \"fossil_CO2_per_GDP_by_country\"   \"LULUCF_macroregions\"            \n[7] \"fossil_CO2_per_capita_by_countr\"\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nCO2_per_capita <- readxl::read_excel(\"data/edgar-co2-2024.xlsx\", sheet = sheets_avail[7])\nstr(CO2_per_capita)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\ntibble [212 × 57] (S3: tbl_df/tbl/data.frame)\n $ Substance         : chr [1:212] \"CO2\" \"CO2\" \"CO2\" \"CO2\" ...\n $ EDGAR Country Code: chr [1:212] \"ABW\" \"AFG\" \"AGO\" \"AIA\" ...\n $ Country           : chr [1:212] \"Aruba\" \"Afghanistan\" \"Angola\" \"Anguilla\" ...\n $ 1970              : num [1:212] 0.427 0.156 1.318 0.34 2.253 ...\n $ 1971              : num [1:212] 0.485 0.152 1.23 0.338 2.197 ...\n $ 1972              : num [1:212] 0.66 0.144 1.461 0.35 2.448 ...\n $ 1973              : num [1:212] 0.735 0.144 1.559 0.323 2.147 ...\n $ 1974              : num [1:212] 0.718 0.178 1.58 0.358 2.26 ...\n $ 1975              : num [1:212] 0.946 0.161 1.419 0.391 2.25 ...\n $ 1976              : num [1:212] 0.931 0.147 0.923 0.367 2.352 ...\n $ 1977              : num [1:212] 1.112 0.175 1.48 0.381 2.463 ...\n $ 1978              : num [1:212] 1.197 0.146 1.697 0.434 2.652 ...\n $ 1979              : num [1:212] 1.266 0.155 1.641 0.48 3.022 ...\n $ 1980              : num [1:212] 1.327 0.151 1.603 0.66 3.011 ...\n $ 1981              : num [1:212] 1.369 0.173 1.431 1 2.586 ...\n $ 1982              : num [1:212] 1.334 0.181 1.333 1.067 2.608 ...\n $ 1983              : num [1:212] 1.357 0.242 1.331 0.933 2.741 ...\n $ 1984              : num [1:212] 1.569 0.268 1.3 0.887 2.906 ...\n $ 1985              : num [1:212] 1.652 0.35 1.329 0.552 2.721 ...\n $ 1986              : num [1:212] 1.82 0.34 1.3 0.46 2.68 ...\n $ 1987              : num [1:212] 2.081 0.285 1.293 0.853 2.657 ...\n $ 1988              : num [1:212] 2.339 0.268 1.298 0.767 2.565 ...\n $ 1989              : num [1:212] 3.235 0.246 1.277 0.773 2.43 ...\n $ 1990              : num [1:212] 3.232 0.239 0.923 0.735 2.025 ...\n $ 1991              : num [1:212] 3.501 0.219 0.938 0.876 1.337 ...\n $ 1992              : num [1:212] 3.672 0.13 0.935 0.881 0.729 ...\n $ 1993              : num [1:212] 3.467 0.118 0.906 1.076 0.697 ...\n $ 1994              : num [1:212] 3.724 0.104 0.83 1.378 0.746 ...\n $ 1995              : num [1:212] 3.9115 0.0856 0.9078 1.6741 0.6663 ...\n $ 1996              : num [1:212] 2.4827 0.0795 1.0679 1.6134 0.6645 ...\n $ 1997              : num [1:212] 4.011 0.0753 1.087 1.3179 0.511 ...\n $ 1998              : num [1:212] 4.0207 0.0753 1.0988 1.1817 0.6169 ...\n $ 1999              : num [1:212] 3.9943 0.0709 1.1305 1.0902 0.9907 ...\n $ 2000              : num [1:212] 2.9561 0.0506 1.0043 1.4045 1.0354 ...\n $ 2001              : num [1:212] 2.9222 0.0451 0.9534 1.4005 1.1015 ...\n $ 2002              : num [1:212] 3.122 0.0429 0.9057 0.9302 1.2845 ...\n $ 2003              : num [1:212] 3.5244 0.0437 0.952 1.1749 1.3536 ...\n $ 2004              : num [1:212] 3.534 0.037 0.938 1.093 1.425 ...\n $ 2005              : num [1:212] 3.8472 0.0505 0.7998 1.0824 1.3473 ...\n $ 2006              : num [1:212] 4.2019 0.0544 0.8054 0.9944 1.3537 ...\n $ 2007              : num [1:212] 4.5202 0.0755 0.8123 0.941 1.4036 ...\n $ 2008              : num [1:212] 4.479 0.14 0.879 1.144 1.402 ...\n $ 2009              : num [1:212] 4.857 0.217 0.935 1.488 1.443 ...\n $ 2010              : num [1:212] 4.743 0.27 0.973 1.745 1.55 ...\n $ 2011              : num [1:212] 2.843 0.384 0.977 1.866 1.704 ...\n $ 2012              : num [1:212] 3.654 0.318 0.985 1.843 1.552 ...\n $ 2013              : num [1:212] 3.996 0.262 1.098 1.955 1.634 ...\n $ 2014              : num [1:212] 4.246 0.239 1.147 1.931 1.745 ...\n $ 2015              : num [1:212] 4.428 0.247 1.188 1.918 1.664 ...\n $ 2016              : num [1:212] 4.626 0.217 1.086 1.921 1.548 ...\n $ 2017              : num [1:212] 4.433 0.227 0.938 1.951 1.823 ...\n $ 2018              : num [1:212] 4.409 0.218 0.853 1.878 1.808 ...\n $ 2019              : num [1:212] 5.261 0.195 0.867 1.819 1.686 ...\n $ 2020              : num [1:212] 4.252 0.185 0.631 1.492 1.55 ...\n $ 2021              : num [1:212] 4.679 0.204 0.745 1.468 1.712 ...\n $ 2022              : num [1:212] 4.698 0.208 0.782 1.457 1.564 ...\n $ 2023              : num [1:212] 4.908 0.214 0.782 1.435 1.558 ...\n```\n\n\n:::\n:::\n\n\n\nWe need to make this longer if we want to use Tidyverse-style plotting commands.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCO2_per_capita_long <- CO2_per_capita |>\n  tidyr::pivot_longer(\n    cols = (starts_with(\"19\") |\n              starts_with(\"20\")),\n    names_to = \"year\",\n    values_to = \"emissionsPerCapita\"\n  ) |>\n  # Make the year a properly formatted YYYY-MM-DD string for parsing\n  dplyr::mutate(year = lubridate::as_date(paste0(year, \"-12-31\")))\n```\n:::\n\n\n\nNow we can make our first attempt at a plot.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nCO2_per_capita_long |>\n  dplyr::filter(\n    Country %in% c(\n      \"United States\",\n      \"China\",\n      \"Japan\",\n      \"Germany\",\n      \"France and Monaco\",\n      \"Canada\",\n      \"United Kingdom\",\n      \"Taiwan\",\n      \"South Korea\",\n      \"Australia\"\n    )\n  ) |>\n  ggplot2::ggplot() +\n  aes(year, emissionsPerCapita, color = Country, group = Country) +\n  geom_point() +\n  geom_line() +\n  theme_classic() +\n  theme(axis.text.x = element_text(angle = 90))\n```\n\n::: {.cell-output-display}\n![CO2 emissions per capita 1970-2023 from the Emissions Database for Global Atmospheric Research (EDGAR) database.](index_files/figure-html/fig-co2-emissions-1970-2023-big-economies-1.png){#fig-co2-emissions-1970-2023-big-economies width=672}\n:::\n:::\n\n\n\nLet's look at the top countries in 2023.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntop_2023 <- CO2_per_capita_long |>\n  dplyr::filter(year == \"2023-12-31\") |>\n  dplyr::arrange(desc(emissionsPerCapita))\n\ntop_20_2023 <- top_2023[1:20,]\ntop_20_countries_2023 <- top_20_2023$Country\n\ntop_20_2023 |>\n  dplyr::select(Country, emissionsPerCapita) |>\n  kableExtra::kable(format = 'html') |>\n  kableExtra::kable_classic()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-classic\" style='font-family: \"Arial Narrow\", \"Source Sans Pro\", sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Country </th>\n   <th style=\"text-align:right;\"> emissionsPerCapita </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Palau </td>\n   <td style=\"text-align:right;\"> 62.59089 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Qatar </td>\n   <td style=\"text-align:right;\"> 43.55052 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Kuwait </td>\n   <td style=\"text-align:right;\"> 24.89597 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Brunei </td>\n   <td style=\"text-align:right;\"> 21.12187 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> New Caledonia </td>\n   <td style=\"text-align:right;\"> 20.90426 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Bahrain </td>\n   <td style=\"text-align:right;\"> 20.69999 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> United Arab Emirates </td>\n   <td style=\"text-align:right;\"> 20.22100 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Trinidad and Tobago </td>\n   <td style=\"text-align:right;\"> 19.70759 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Gibraltar </td>\n   <td style=\"text-align:right;\"> 19.67394 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Saudi Arabia </td>\n   <td style=\"text-align:right;\"> 17.15496 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Oman </td>\n   <td style=\"text-align:right;\"> 17.11290 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Canada </td>\n   <td style=\"text-align:right;\"> 14.91330 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Curaçao </td>\n   <td style=\"text-align:right;\"> 14.66348 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Russia </td>\n   <td style=\"text-align:right;\"> 14.45143 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Australia </td>\n   <td style=\"text-align:right;\"> 14.21297 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> United States </td>\n   <td style=\"text-align:right;\"> 13.83075 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Seychelles </td>\n   <td style=\"text-align:right;\"> 12.75529 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Kazakhstan </td>\n   <td style=\"text-align:right;\"> 12.43028 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Taiwan </td>\n   <td style=\"text-align:right;\"> 11.67587 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Luxembourg </td>\n   <td style=\"text-align:right;\"> 11.17618 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\nLet's see how these countries fared since 1970.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCO2_per_capita_long |>\n  dplyr::filter(Country %in% top_20_2023$Country) |>\n  ggplot2::ggplot() +\n  aes(year, emissionsPerCapita, color = Country, group = Country) +\n  geom_point() +\n  geom_line() +\n  theme_classic() +\n  theme(axis.text.x = element_text(angle = 90))\n```\n\n::: {.cell-output-display}\n![CO2 emissions per capita 1970-2023 from the Emissions Database for Global Atmospheric Research (EDGAR) database. This chart focuses on the top 20 emitters in 2023.](index_files/figure-html/fig-co2-emissions-1970-2023-largest-in-2023-1.png){#fig-co2-emissions-1970-2023-largest-in-2023 width=672}\n:::\n:::\n\n\n\nNow, let's see how the top 20 in 1970 have changed.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntop_1970 <- CO2_per_capita_long |>\n  dplyr::filter(year == \"1970-12-31\") |>\n  dplyr::arrange(desc(emissionsPerCapita))\n\ntop_20_1970 <- top_1970[1:20,]\ntop_20_countries_1970 <- top_20_1970$Country\n\ntop_20_1970 |>\n  dplyr::select(Country, emissionsPerCapita) |>\n  kableExtra::kable(format = 'html') |>\n  kableExtra::kable_classic()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-classic\" style='font-family: \"Arial Narrow\", \"Source Sans Pro\", sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Country </th>\n   <th style=\"text-align:right;\"> emissionsPerCapita </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Palau </td>\n   <td style=\"text-align:right;\"> 173.76140 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Qatar </td>\n   <td style=\"text-align:right;\"> 134.23816 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Curaçao </td>\n   <td style=\"text-align:right;\"> 101.06091 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> United Arab Emirates </td>\n   <td style=\"text-align:right;\"> 82.65335 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Luxembourg </td>\n   <td style=\"text-align:right;\"> 57.93929 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Kuwait </td>\n   <td style=\"text-align:right;\"> 51.73405 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> United States </td>\n   <td style=\"text-align:right;\"> 21.92427 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Czechia </td>\n   <td style=\"text-align:right;\"> 19.17800 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Libya </td>\n   <td style=\"text-align:right;\"> 18.54289 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Canada </td>\n   <td style=\"text-align:right;\"> 16.69381 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Estonia </td>\n   <td style=\"text-align:right;\"> 15.63304 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Brunei </td>\n   <td style=\"text-align:right;\"> 15.62203 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Belgium </td>\n   <td style=\"text-align:right;\"> 14.45745 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Kazakhstan </td>\n   <td style=\"text-align:right;\"> 14.11505 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Bahrain </td>\n   <td style=\"text-align:right;\"> 14.00774 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Germany </td>\n   <td style=\"text-align:right;\"> 13.80446 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Denmark </td>\n   <td style=\"text-align:right;\"> 12.56345 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Australia </td>\n   <td style=\"text-align:right;\"> 12.48760 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> United Kingdom </td>\n   <td style=\"text-align:right;\"> 12.10428 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Sweden </td>\n   <td style=\"text-align:right;\"> 11.93955 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nCO2_per_capita_long |>\n  dplyr::filter(Country %in% top_20_1970$Country) |>\n  ggplot2::ggplot() +\n  aes(year, emissionsPerCapita, color = Country, group = Country) +\n  geom_point() +\n  geom_line() +\n  theme_classic() +\n  theme(axis.text.x = element_text(angle = 90))\n```\n\n::: {.cell-output-display}\n![CO2 emissions per capita 1970-2023 from the Emissions Database for Global Atmospheric Research (EDGAR) database. This chart focuses on the top 20 emitters in 1970.](index_files/figure-html/fig-co2-emissions-1970-2023-largest-in-1970-1.png){#fig-co2-emissions-1970-2023-largest-in-1970 width=672}\n:::\n:::\n\n\n\nSo, the top emitters per capita in 1970 have made substantial progress in reducing emissions.\nThe top emitters in 2023 also made substantial reductions from 1970 to 2023.\n\nThe East Asian countries that have have increased emissions per capita since 1970 (China, Taiwan, Japan, South Korea) have joined the mid-ranks of the other wealthy countries in emissions per capita.\n\nThis all strikes me as very interesting, and largely positive news.\nThe data story I would tell is that the world is getting richer, and that per capita CO2 emissions are falling into a similar range, even among countries that have grown quickly over the past 50 years.\nWe just need to do more, especially those of us living in wealthy, large countries who can.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}